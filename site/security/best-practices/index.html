<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Comprehensive documentation for Azure Cloud Scale Analytics services, architecture patterns, and implementation guidance"><meta name=author content="Microsoft CSA Team"><link href=https://microsoft.github.io/csa-inabox-docs/security/best-practices/ rel=canonical><link href=../ rel=prev><link href=../compliance-guide/ rel=next><link rel=icon href=../../assets/images/favicon.ico><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.4.6"><title>Best Practices - Cloud Scale Analytics Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.35e1ed30.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.356b1318.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-XXXXXXXXXX"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-XXXXXXXXXX",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#azure-synapse-analytics-security-best-practices class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Cloud Scale Analytics Documentation" class="md-header__button md-logo" aria-label="Cloud Scale Analytics Documentation" data-md-component=logo> <img src=../../assets/images/Azure-Synapse-Analytics.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Cloud Scale Analytics Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Best Practices </span> </div> </div> </div> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label="Select language"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=/ hreflang=en class=md-select__link> English </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/fgarofalo56/csa-inabox-docs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> fgarofalo56/csa-inabox-docs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../01-overview/ class=md-tabs__link> Overview </a> </li> <li class=md-tabs__item> <a href=../../02-services/ class=md-tabs__link> Services </a> </li> <li class=md-tabs__item> <a href=../../03-architecture-patterns/ class=md-tabs__link> Architecture Patterns </a> </li> <li class=md-tabs__item> <a href=../../tutorials/ class=md-tabs__link> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../best-practices/ class=md-tabs__link> Best Practices </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Security </a> </li> <li class=md-tabs__item> <a href=../../reference/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../troubleshooting/ class=md-tabs__link> Troubleshooting </a> </li> <li class=md-tabs__item> <a href=../../code-examples/ class=md-tabs__link> Code Examples </a> </li> <li class=md-tabs__item> <a href=../../solutions/ class=md-tabs__link> Solutions </a> </li> <li class=md-tabs__item> <a href=../../guides/ class=md-tabs__link> Guides </a> </li> <li class=md-tabs__item> <a href=../../faq/ class=md-tabs__link> Additional Resources </a> </li> <li class=md-tabs__item> <a href=../../multimedia/ class=md-tabs__link> Multimedia </a> </li> <li class=md-tabs__item> <a href=../../architecture/ class=md-tabs__link> Legacy Documentation </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Cloud Scale Analytics Documentation" class="md-nav__button md-logo" aria-label="Cloud Scale Analytics Documentation" data-md-component=logo> <img src=../../assets/images/Azure-Synapse-Analytics.png alt=logo> </a> Cloud Scale Analytics Documentation </label> <div class=md-nav__source> <a href=https://github.com/fgarofalo56/csa-inabox-docs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> fgarofalo56/csa-inabox-docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> <span class="md-status md-status--Active"></span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../01-overview/ class="md-nav__link "> <span class=md-ellipsis> Overview </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Overview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../01-overview/service-catalog/ class=md-nav__link> <span class=md-ellipsis> Service Catalog </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../02-services/ class="md-nav__link "> <span class=md-ellipsis> Services </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__container"> <a href=../../02-services/analytics-compute/ class="md-nav__link "> <span class=md-ellipsis> Analytics Compute </span> </a> <label class="md-nav__link " for=__nav_3_2 id=__nav_3_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Analytics Compute </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2_2> <div class="md-nav__link md-nav__container"> <a href=../../02-services/analytics-compute/azure-synapse/ class="md-nav__link "> <span class=md-ellipsis> Azure Synapse Analytics </span> </a> <label class="md-nav__link " for=__nav_3_2_2 id=__nav_3_2_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2_2> <span class="md-nav__icon md-icon"></span> Azure Synapse Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2_2_2> <div class="md-nav__link md-nav__container"> <a href=../../02-services/analytics-compute/azure-synapse/spark-pools/ class="md-nav__link "> <span class=md-ellipsis> Spark Pools </span> </a> <label class="md-nav__link " for=__nav_3_2_2_2 id=__nav_3_2_2_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_2_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2_2_2> <span class="md-nav__icon md-icon"></span> Spark Pools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../02-services/analytics-compute/azure-synapse/spark-pools/delta-lakehouse/ class=md-nav__link> <span class=md-ellipsis> Delta Lakehouse </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__container"> <a href=../../02-services/streaming-services/ class="md-nav__link "> <span class=md-ellipsis> Streaming Services </span> </a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Streaming Services </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../03-architecture-patterns/ class="md-nav__link "> <span class=md-ellipsis> Architecture Patterns </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Architecture Patterns </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <div class="md-nav__link md-nav__container"> <a href=../../tutorials/ class="md-nav__link "> <span class=md-ellipsis> Tutorials </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/interactive-data-pipeline/ class=md-nav__link> <span class=md-ellipsis> Interactive Data Pipeline </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/synapse/ class=md-nav__link> <span class=md-ellipsis> Synapse Tutorials </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/stream-analytics/ class=md-nav__link> <span class=md-ellipsis> Stream Analytics </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/data-factory/ class=md-nav__link> <span class=md-ellipsis> Data Factory </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/integration/ class=md-nav__link> <span class=md-ellipsis> Integration </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/code-labs/ class=md-nav__link> <span class=md-ellipsis> Code Labs </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/learning-paths/ class=md-nav__link> <span class=md-ellipsis> Learning Paths </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <div class="md-nav__link md-nav__container"> <a href=../../best-practices/ class="md-nav__link "> <span class=md-ellipsis> Best Practices </span> </a> <label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Best Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../best-practices/cost-optimization/ class=md-nav__link> <span class=md-ellipsis> Cost Optimization </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/data-governance/ class=md-nav__link> <span class=md-ellipsis> Data Governance </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/delta-lake-optimization/ class=md-nav__link> <span class=md-ellipsis> Delta Lake Optimization </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/implementation-patterns/ class=md-nav__link> <span class=md-ellipsis> Implementation Patterns </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/network-security/ class=md-nav__link> <span class=md-ellipsis> Network Security </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/performance/ class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/performance-optimization/ class=md-nav__link> <span class=md-ellipsis> Performance Optimization </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/pipeline-optimization/ class=md-nav__link> <span class=md-ellipsis> Pipeline Optimization </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/serverless-sql-best-practices/ class=md-nav__link> <span class=md-ellipsis> Serverless SQL Best Practices </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/spark-performance/ class=md-nav__link> <span class=md-ellipsis> Spark Performance </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/sql-performance/ class=md-nav__link> <span class=md-ellipsis> SQL Performance </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_14> <label class=md-nav__link for=__nav_6_14 id=__nav_6_14_label tabindex> <span class=md-ellipsis> Service-Specific </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_14_label aria-expanded=false> <label class=md-nav__title for=__nav_6_14> <span class="md-nav__icon md-icon"></span> Service-Specific </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_14_1> <div class="md-nav__link md-nav__container"> <a href=../../05-best-practices/service-specific/databricks/ class="md-nav__link "> <span class=md-ellipsis> Databricks </span> </a> <label class="md-nav__link " for=__nav_6_14_1 id=__nav_6_14_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_14_1_label aria-expanded=false> <label class=md-nav__title for=__nav_6_14_1> <span class="md-nav__icon md-icon"></span> Databricks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../05-best-practices/service-specific/databricks/delta-lake/ class=md-nav__link> <span class=md-ellipsis> Delta Lake </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/service-specific/databricks/mlops/ class=md-nav__link> <span class=md-ellipsis> MLOps </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_14_2> <div class="md-nav__link md-nav__container"> <a href=../../05-best-practices/service-specific/hdinsight/ class="md-nav__link "> <span class=md-ellipsis> HDInsight </span> </a> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_14_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_14_2> <span class="md-nav__icon md-icon"></span> HDInsight </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_14_3> <div class="md-nav__link md-nav__container"> <a href=../../05-best-practices/service-specific/storage/ class="md-nav__link "> <span class=md-ellipsis> Storage </span> </a> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_14_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_14_3> <span class="md-nav__icon md-icon"></span> Storage </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_14_4> <label class=md-nav__link for=__nav_6_14_4 id=__nav_6_14_4_label tabindex=0> <span class=md-ellipsis> Synapse </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_14_4_label aria-expanded=false> <label class=md-nav__title for=__nav_6_14_4> <span class="md-nav__icon md-icon"></span> Synapse </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../05-best-practices/service-specific/synapse/spark-best-practices/ class=md-nav__link> <span class=md-ellipsis> Spark Best Practices </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/service-specific/synapse/spark-performance/ class=md-nav__link> <span class=md-ellipsis> Spark Performance </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/service-specific/synapse/dedicated-sql-best-practices/ class=md-nav__link> <span class=md-ellipsis> Dedicated SQL </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/service-specific/synapse/data-explorer-best-practices/ class=md-nav__link> <span class=md-ellipsis> Data Explorer </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_15> <div class="md-nav__link md-nav__container"> <a href=../../05-best-practices/cross-cutting-concerns/ class="md-nav__link "> <span class=md-ellipsis> Cross-Cutting Concerns </span> </a> <label class="md-nav__link " for=__nav_6_15 id=__nav_6_15_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_15_label aria-expanded=false> <label class=md-nav__title for=__nav_6_15> <span class="md-nav__icon md-icon"></span> Cross-Cutting Concerns </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../05-best-practices/cross-cutting-concerns/data-governance/retention-policies/ class=md-nav__link> <span class=md-ellipsis> Data Governance </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/cross-cutting-concerns/development/stream-analytics-queries/ class=md-nav__link> <span class=md-ellipsis> Development </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/cross-cutting-concerns/event-handling/event-grid-patterns/ class=md-nav__link> <span class=md-ellipsis> Event Handling </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/cross-cutting-concerns/governance/metadata-governance/ class=md-nav__link> <span class=md-ellipsis> Governance </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/cross-cutting-concerns/networking/databricks-networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/cross-cutting-concerns/storage/capture-optimization/ class=md-nav__link> <span class=md-ellipsis> Storage </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_16> <div class="md-nav__link md-nav__container"> <a href=../../05-best-practices/operational-excellence/ class="md-nav__link "> <span class=md-ellipsis> Operational Excellence </span> </a> <label class="md-nav__link " for=__nav_6_16 id=__nav_6_16_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_16_label aria-expanded=false> <label class=md-nav__title for=__nav_6_16> <span class="md-nav__icon md-icon"></span> Operational Excellence </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../05-best-practices/operational-excellence/alert-strategies/ class=md-nav__link> <span class=md-ellipsis> Alert Strategies </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/operational-excellence/edge-offline-handling/ class=md-nav__link> <span class=md-ellipsis> Edge Offline Handling </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/operational-excellence/eventgrid-reliability/ class=md-nav__link> <span class=md-ellipsis> Event Grid Reliability </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/operational-excellence/eventhub-dr/ class=md-nav__link> <span class=md-ellipsis> Event Hubs DR </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/operational-excellence/monitoring/ class=md-nav__link> <span class=md-ellipsis> Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../05-best-practices/operational-excellence/reliability/ class=md-nav__link> <span class=md-ellipsis> Reliability </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Security </span> </a> <label class="md-nav__link " for=__nav_7 id=__nav_7_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=true> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Security </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Best Practices </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Best Practices </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#network-security-best-practices class=md-nav__link> Network Security Best Practices </a> <nav class=md-nav aria-label="Network Security Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#implement-network-isolation class=md-nav__link> Implement Network Isolation </a> </li> <li class=md-nav__item> <a href=#network-traffic-filtering-and-monitoring class=md-nav__link> Network Traffic Filtering and Monitoring </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#identity-and-access-management-best-practices class=md-nav__link> Identity and Access Management Best Practices </a> <nav class=md-nav aria-label="Identity and Access Management Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#implement-azure-active-directory-integration class=md-nav__link> Implement Azure Active Directory Integration </a> </li> <li class=md-nav__item> <a href=#apply-principle-of-least-privilege class=md-nav__link> Apply Principle of Least Privilege </a> </li> <li class=md-nav__item> <a href=#secure-service-principals-and-managed-identities class=md-nav__link> Secure Service Principals and Managed Identities </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#data-protection-best-practices class=md-nav__link> Data Protection Best Practices </a> <nav class=md-nav aria-label="Data Protection Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#implement-encryption class=md-nav__link> Implement Encryption </a> </li> <li class=md-nav__item> <a href=#implement-data-level-security class=md-nav__link> Implement Data-Level Security </a> </li> <li class=md-nav__item> <a href=#secure-data-storage-and-movement class=md-nav__link> Secure Data Storage and Movement </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoring-and-threat-protection-best-practices class=md-nav__link> Monitoring and Threat Protection Best Practices </a> <nav class=md-nav aria-label="Monitoring and Threat Protection Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#implement-comprehensive-monitoring class=md-nav__link> Implement Comprehensive Monitoring </a> </li> <li class=md-nav__item> <a href=#implement-advanced-threat-protection class=md-nav__link> Implement Advanced Threat Protection </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#secure-development-and-deployment-best-practices class=md-nav__link> Secure Development and Deployment Best Practices </a> <nav class=md-nav aria-label="Secure Development and Deployment Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#secure-cicd-practices class=md-nav__link> Secure CI/CD Practices </a> </li> <li class=md-nav__item> <a href=#secure-code-development class=md-nav__link> Secure Code Development </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#secure-operations-best-practices class=md-nav__link> Secure Operations Best Practices </a> <nav class=md-nav aria-label="Secure Operations Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#implement-security-baselines class=md-nav__link> Implement Security Baselines </a> </li> <li class=md-nav__item> <a href=#incident-response class=md-nav__link> Incident Response </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#special-considerations-for-hybrid-environments class=md-nav__link> Special Considerations for Hybrid Environments </a> <nav class=md-nav aria-label="Special Considerations for Hybrid Environments"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#secure-hybrid-connectivity class=md-nav__link> Secure Hybrid Connectivity </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#security-checklist class=md-nav__link> Security Checklist </a> <nav class=md-nav aria-label="Security Checklist"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#network-security class=md-nav__link> Network Security </a> </li> <li class=md-nav__item> <a href=#identity-and-access-management class=md-nav__link> Identity and Access Management </a> </li> <li class=md-nav__item> <a href=#data-protection class=md-nav__link> Data Protection </a> </li> <li class=md-nav__item> <a href=#monitoring-and-threat-protection class=md-nav__link> Monitoring and Threat Protection </a> </li> <li class=md-nav__item> <a href=#secure-development-and-deployment class=md-nav__link> Secure Development and Deployment </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#related-topics class=md-nav__link> Related Topics </a> </li> <li class=md-nav__item> <a href=#external-resources class=md-nav__link> External Resources </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../compliance-guide/ class=md-nav__link> <span class=md-ellipsis> Compliance Guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <div class="md-nav__link md-nav__container"> <a href=../../reference/ class="md-nav__link "> <span class=md-ellipsis> Reference </span> </a> <label class="md-nav__link " for=__nav_8 id=__nav_8_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/glossary/ class=md-nav__link> <span class=md-ellipsis> Glossary </span> </a> </li> <li class=md-nav__item> <a href=../../reference/security-checklist/ class=md-nav__link> <span class=md-ellipsis> Security Checklist </span> </a> </li> <li class=md-nav__item> <a href=../../reference/spark-configuration/ class=md-nav__link> <span class=md-ellipsis> Spark Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../reference/regional-compliance/ class=md-nav__link> <span class=md-ellipsis> Regional Compliance </span> </a> </li> <li class=md-nav__item> <a href=../../reference/azure-regions/ class=md-nav__link> <span class=md-ellipsis> Azure Regions </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <div class="md-nav__link md-nav__container"> <a href=../../troubleshooting/ class="md-nav__link "> <span class=md-ellipsis> Troubleshooting </span> </a> <label class="md-nav__link " for=__nav_9 id=__nav_9_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../troubleshooting/guided-troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Guided Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/authentication-troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Authentication </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/connectivity-troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Connectivity </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/delta-lake-troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Delta Lake </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/pipeline-troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Pipelines </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/serverless-sql-troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Serverless SQL </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/spark-troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Spark </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10> <div class="md-nav__link md-nav__container"> <a href=../../code-examples/ class="md-nav__link "> <span class=md-ellipsis> Code Examples </span> </a> <label class="md-nav__link " for=__nav_10 id=__nav_10_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Code Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10_2> <div class="md-nav__link md-nav__container"> <a href=../../code-examples/delta-lake/ class="md-nav__link "> <span class=md-ellipsis> Delta Lake </span> </a> <label class="md-nav__link " for=__nav_10_2 id=__nav_10_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_10_2_label aria-expanded=false> <label class=md-nav__title for=__nav_10_2> <span class="md-nav__icon md-icon"></span> Delta Lake </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../code-examples/delta-lake/cdc/change-data-capture/ class=md-nav__link> <span class=md-ellipsis> CDC </span> </a> </li> <li class=md-nav__item> <a href=../../code-examples/delta-lake/ingestion/auto-loader/ class=md-nav__link> <span class=md-ellipsis> Auto Loader </span> </a> </li> <li class=md-nav__item> <a href=../../code-examples/delta-lake/optimization/table-optimization/ class=md-nav__link> <span class=md-ellipsis> Table Optimization </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10_3> <div class="md-nav__link md-nav__container"> <a href=../../code-examples/serverless-sql/ class="md-nav__link "> <span class=md-ellipsis> Serverless SQL </span> </a> <label class="md-nav__link " for=__nav_10_3 id=__nav_10_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_10_3_label aria-expanded=false> <label class=md-nav__title for=__nav_10_3> <span class="md-nav__icon md-icon"></span> Serverless SQL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../code-examples/serverless-sql/query-optimization/ class=md-nav__link> <span class=md-ellipsis> Query Optimization </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10_4> <div class="md-nav__link md-nav__container"> <a href=../../code-examples/integration/ class="md-nav__link "> <span class=md-ellipsis> Integration </span> </a> <label class="md-nav__link " for=__nav_10_4 id=__nav_10_4_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_10_4_label aria-expanded=false> <label class=md-nav__title for=__nav_10_4> <span class="md-nav__icon md-icon"></span> Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../code-examples/integration/azure-data-factory/ class=md-nav__link> <span class=md-ellipsis> Azure Data Factory </span> </a> </li> <li class=md-nav__item> <a href=../../code-examples/integration/azure-ml/ class=md-nav__link> <span class=md-ellipsis> Azure ML </span> </a> </li> <li class=md-nav__item> <a href=../../code-examples/integration/azure-purview/ class=md-nav__link> <span class=md-ellipsis> Azure Purview </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_11> <div class="md-nav__link md-nav__container"> <a href=../../solutions/ class="md-nav__link "> <span class=md-ellipsis> Solutions </span> </a> <label class="md-nav__link " for=__nav_11 id=__nav_11_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_11_label aria-expanded=false> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> Solutions </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_11_2> <div class="md-nav__link md-nav__container"> <a href=../../solutions/azure-realtime-analytics/ class="md-nav__link "> <span class=md-ellipsis> Azure Real-time Analytics </span> </a> <label class="md-nav__link " for=__nav_11_2 id=__nav_11_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_11_2_label aria-expanded=false> <label class=md-nav__title for=__nav_11_2> <span class="md-nav__icon md-icon"></span> Azure Real-time Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../solutions/azure-realtime-analytics/architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../solutions/azure-realtime-analytics/implementation/ class=md-nav__link> <span class=md-ellipsis> Implementation </span> </a> </li> <li class=md-nav__item> <a href=../../solutions/azure-realtime-analytics/operations/ class=md-nav__link> <span class=md-ellipsis> Operations </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12> <div class="md-nav__link md-nav__container"> <a href=../../guides/ class="md-nav__link "> <span class=md-ellipsis> Guides </span> </a> <label class="md-nav__link " for=__nav_12 id=__nav_12_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_12_label aria-expanded=false> <label class=md-nav__title for=__nav_12> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/quick-start-wizard/ class=md-nav__link> <span class=md-ellipsis> Quick Start Wizard </span> </a> </li> <li class=md-nav__item> <a href=../../guides/CONTRIBUTING_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Contributing Guide </span> </a> </li> <li class=md-nav__item> <a href=../../guides/DEVELOPMENT_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Development Guide </span> </a> </li> <li class=md-nav__item> <a href=../../guides/DIRECTORY_STRUCTURE_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Directory Structure Guide </span> </a> </li> <li class=md-nav__item> <a href=../../guides/MARKDOWN_STYLE_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Markdown Style Guide </span> </a> </li> <li class=md-nav__item> <a href=../../guides/TESTING_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Testing Guide </span> </a> </li> <li class=md-nav__item> <a href=../../guides/CODE_REVIEW_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Code Review Guide </span> </a> </li> <li class=md-nav__item> <a href=../../guides/localization-guide/ class=md-nav__link> <span class=md-ellipsis> Localization Guide </span> </a> </li> <li class=md-nav__item> <a href=../../guides/analytics-setup/ class=md-nav__link> <span class=md-ellipsis> Analytics Setup Guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_13> <label class=md-nav__link for=__nav_13 id=__nav_13_label tabindex> <span class=md-ellipsis> Additional Resources </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_13_label aria-expanded=false> <label class=md-nav__title for=__nav_13> <span class="md-nav__icon md-icon"></span> Additional Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_13_2> <label class=md-nav__link for=__nav_13_2 id=__nav_13_2_label tabindex> <span class=md-ellipsis> Administration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_13_2_label aria-expanded=false> <label class=md-nav__title for=__nav_13_2> <span class="md-nav__icon md-icon"></span> Administration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../administration/workspace-management/ class=md-nav__link> <span class=md-ellipsis> Workspace Management </span> </a> </li> <li class=md-nav__item> <a href=../../administration/usage-reporting/ class=md-nav__link> <span class=md-ellipsis> Usage Reporting </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_13_3> <div class="md-nav__link md-nav__container"> <a href=../../monitoring/ class="md-nav__link "> <span class=md-ellipsis> Monitoring </span> </a> <label class="md-nav__link " for=__nav_13_3 id=__nav_13_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_13_3_label aria-expanded=false> <label class=md-nav__title for=__nav_13_3> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../monitoring/deployment-monitoring/ class=md-nav__link> <span class=md-ellipsis> Deployment Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/logging-monitoring-guide/ class=md-nav__link> <span class=md-ellipsis> Logging & Monitoring Guide </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/security-monitoring/ class=md-nav__link> <span class=md-ellipsis> Security Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/spark-monitoring/ class=md-nav__link> <span class=md-ellipsis> Spark Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/sql-monitoring/ class=md-nav__link> <span class=md-ellipsis> SQL Monitoring </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_13_3_7> <div class="md-nav__link md-nav__container"> <a href=../../09-monitoring/service-monitoring/hdinsight/ class="md-nav__link "> <span class=md-ellipsis> Service Monitoring </span> </a> <label class="md-nav__link " for=__nav_13_3_7 id=__nav_13_3_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_13_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_13_3_7> <span class="md-nav__icon md-icon"></span> Service Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_13_3_7_1> <div class="md-nav__link md-nav__container"> <a href=../../09-monitoring/service-monitoring/databricks/ class="md-nav__link "> <span class=md-ellipsis> Databricks </span> </a> <label class="md-nav__link " for=__nav_13_3_7_1 id=__nav_13_3_7_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_13_3_7_1_label aria-expanded=false> <label class=md-nav__title for=__nav_13_3_7_1> <span class="md-nav__icon md-icon"></span> Databricks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../09-monitoring/service-monitoring/databricks/dlt-monitoring/ class=md-nav__link> <span class=md-ellipsis> DLT Monitoring </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../09-monitoring/service-monitoring/storage/ class=md-nav__link> <span class=md-ellipsis> Storage </span> </a> </li> <li class=md-nav__item> <a href=../../09-monitoring/service-monitoring/synapse/dedicated-monitoring/ class=md-nav__link> <span class=md-ellipsis> Synapse Dedicated </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_13_4> <label class=md-nav__link for=__nav_13_4 id=__nav_13_4_label tabindex> <span class=md-ellipsis> DevOps </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_13_4_label aria-expanded=false> <label class=md-nav__title for=__nav_13_4> <span class="md-nav__icon md-icon"></span> DevOps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../devops/automated-testing/ class=md-nav__link> <span class=md-ellipsis> Automated Testing </span> </a> </li> <li class=md-nav__item> <a href=../../devops/pipeline-ci-cd/ class=md-nav__link> <span class=md-ellipsis> Pipeline CI/CD </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_13_5> <div class="md-nav__link md-nav__container"> <a href=../../diagrams/ class="md-nav__link "> <span class=md-ellipsis> Diagrams </span> </a> <label class="md-nav__link " for=__nav_13_5 id=__nav_13_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_13_5_label aria-expanded=false> <label class=md-nav__title for=__nav_13_5> <span class="md-nav__icon md-icon"></span> Diagrams </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../diagrams/architecture-diagrams/ class=md-nav__link> <span class=md-ellipsis> Architecture Diagrams </span> </a> </li> <li class=md-nav__item> <a href=../../diagrams/data-governance-diagrams/ class=md-nav__link> <span class=md-ellipsis> Data Governance Diagrams </span> </a> </li> <li class=md-nav__item> <a href=../../diagrams/process-flowcharts/ class=md-nav__link> <span class=md-ellipsis> Process Flowcharts </span> </a> </li> <li class=md-nav__item> <a href=../../diagrams/security-diagrams/ class=md-nav__link> <span class=md-ellipsis> Security Diagrams </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_14> <div class="md-nav__link md-nav__container"> <a href=../../multimedia/ class="md-nav__link "> <span class=md-ellipsis> Multimedia </span> </a> <label class="md-nav__link " for=__nav_14 id=__nav_14_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_14_label aria-expanded=false> <label class=md-nav__title for=__nav_14> <span class="md-nav__icon md-icon"></span> Multimedia </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../multimedia/interactive-demos/ class=md-nav__link> <span class=md-ellipsis> Interactive Demos </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_14_3> <div class="md-nav__link md-nav__container"> <a href=../../multimedia/video-tutorials/ class="md-nav__link "> <span class=md-ellipsis> Video Tutorials </span> </a> <label class="md-nav__link " for=__nav_14_3 id=__nav_14_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_14_3_label aria-expanded=false> <label class=md-nav__title for=__nav_14_3> <span class="md-nav__icon md-icon"></span> Video Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../multimedia/video-tutorials/synapse-fundamentals/ class=md-nav__link> <span class=md-ellipsis> Synapse Fundamentals </span> </a> </li> <li class=md-nav__item> <a href=../../multimedia/video-tutorials/advanced-features/ class=md-nav__link> <span class=md-ellipsis> Advanced Features </span> </a> </li> <li class=md-nav__item> <a href=../../multimedia/video-tutorials/ci-cd-pipelines/ class=md-nav__link> <span class=md-ellipsis> CI/CD Pipelines </span> </a> </li> <li class=md-nav__item> <a href=../../multimedia/video-tutorials/disaster-recovery/ class=md-nav__link> <span class=md-ellipsis> Disaster Recovery </span> </a> </li> <li class=md-nav__item> <a href=../../multimedia/video-tutorials/monitoring-dashboards/ class=md-nav__link> <span class=md-ellipsis> Monitoring Dashboards </span> </a> </li> <li class=md-nav__item> <a href=../../multimedia/video-tutorials/performance-tuning/ class=md-nav__link> <span class=md-ellipsis> Performance Tuning </span> </a> </li> <li class=md-nav__item> <a href=../../multimedia/video-tutorials/power-bi-reporting/ class=md-nav__link> <span class=md-ellipsis> Power BI Reporting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../multimedia/animations/ class=md-nav__link> <span class=md-ellipsis> Animations </span> </a> </li> <li class=md-nav__item> <a href=../../multimedia/audio-content/ class=md-nav__link> <span class=md-ellipsis> Audio Content </span> </a> </li> <li class=md-nav__item> <a href=../../multimedia/presentations/ class=md-nav__link> <span class=md-ellipsis> Presentations </span> </a> </li> <li class=md-nav__item> <a href=../../multimedia/templates/ class=md-nav__link> <span class=md-ellipsis> Templates </span> </a> </li> <li class=md-nav__item> <a href=../../multimedia/production-guide/ class=md-nav__link> <span class=md-ellipsis> Production Guide </span> </a> </li> <li class=md-nav__item> <a href=../../multimedia/tools/ class=md-nav__link> <span class=md-ellipsis> Tools </span> </a> </li> <li class=md-nav__item> <a href=../../multimedia/CONTRIBUTING/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_15> <div class="md-nav__link md-nav__container"> <a href=../../architecture/ class="md-nav__link "> <span class=md-ellipsis> Legacy Documentation </span> </a> <label class="md-nav__link " for=__nav_15 id=__nav_15_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_15_label aria-expanded=false> <label class=md-nav__title for=__nav_15> <span class="md-nav__icon md-icon"></span> Legacy Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../serverless-sql/ class=md-nav__link> <span class=md-ellipsis> Serverless SQL (Legacy) </span> </a> </li> <li class=md-nav__item> <a href=../../shared-metadata/ class=md-nav__link> <span class=md-ellipsis> Shared Metadata (Legacy) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=azure-synapse-analytics-security-best-practices>Azure Synapse Analytics Security Best Practices<a class=headerlink href=#azure-synapse-analytics-security-best-practices title="Permanent link">&para;</a></h1> <p><a href=../../README.md>Home</a> &gt; Security &gt; Security Best Practices</p> <p>This document provides comprehensive security best practices for Azure Synapse Analytics implementations, helping you build secure analytics environments that protect your data assets while enabling productivity and insights.</p> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>Security is a critical aspect of any data analytics platform. Azure Synapse Analytics provides extensive security features that, when properly implemented, create a defense-in-depth approach to protect your data and analytics workloads. This guide covers best practices across all layers of security:</p> <ul> <li>Network security and isolation</li> <li>Identity and access management</li> <li>Data protection and encryption</li> <li>Monitoring and threat protection</li> <li>Secure development and deployment</li> </ul> <h2 id=network-security-best-practices>Network Security Best Practices<a class=headerlink href=#network-security-best-practices title="Permanent link">&para;</a></h2> <h3 id=implement-network-isolation>Implement Network Isolation<a class=headerlink href=#implement-network-isolation title="Permanent link">&para;</a></h3> <ol> <li><strong>Deploy Managed VNet</strong></li> </ol> <p>Always enable the managed virtual network during workspace creation to isolate and control data flow:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c># Enable managed VNet during workspace creation</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=nb>New-AzSynapseWorkspace</span> <span class=p>`</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>  <span class=n>-Name</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>  <span class=n>-Location</span> <span class=s2>&quot;eastus&quot;</span> <span class=p>`</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>  <span class=n>-DefaultDataLakeStorageAccountName</span> <span class=s2>&quot;mystorageaccount&quot;</span> <span class=p>`</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>  <span class=n>-DefaultDataLakeStorageFilesystem</span> <span class=s2>&quot;myfilesystem&quot;</span> <span class=p>`</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>  <span class=n>-SqlAdministratorLoginCredential</span> <span class=p>(</span><span class=nb>Get-Credential</span><span class=p>)</span> <span class=p>`</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>  <span class=n>-ManagedVirtualNetwork</span> <span class=s2>&quot;default&quot;</span> <span class=p>`</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>  <span class=n>-AllowAllConnections</span> <span class=nv>$false</span>
</span></code></pre></div> <ol> <li><strong>Use Private Endpoints</strong></li> </ol> <p>Connect to Synapse workspace and associated resources through private endpoints:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c># Create private endpoint for Synapse SQL</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=nv>$privateEndpointConnection</span> <span class=p>=</span> <span class=p>@{</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>  <span class=n>Name</span> <span class=p>=</span> <span class=s2>&quot;synapse-sql-connection&quot;</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>  <span class=n>PrivateLinkServiceId</span> <span class=p>=</span> <span class=nv>$workspace</span><span class=p>.</span><span class=n>Id</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>  <span class=n>GroupId</span> <span class=p>=</span> <span class=s2>&quot;Sql&quot;</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=p>}</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=nb>New-AzPrivateEndpoint</span> <span class=p>`</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>  <span class=n>-Name</span> <span class=s2>&quot;synapse-sql-endpoint&quot;</span> <span class=p>`</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>  <span class=n>-Location</span> <span class=s2>&quot;eastus&quot;</span> <span class=p>`</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>  <span class=n>-Subnet</span> <span class=nv>$subnet</span> <span class=p>`</span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>  <span class=n>-PrivateLinkServiceConnection</span> <span class=nv>$privateEndpointConnection</span>
</span></code></pre></div> <ol> <li><strong>Configure IP Firewall Rules</strong></li> </ol> <p>Restrict public access to your Synapse workspace:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c># Add IP firewall rule</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=nb>Update-AzSynapseFirewallRule</span> <span class=p>`</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>  <span class=n>-WorkspaceName</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>  <span class=n>-Name</span> <span class=s2>&quot;AllowedIPRange&quot;</span> <span class=p>`</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>  <span class=n>-StartIpAddress</span> <span class=s2>&quot;203.0.113.0&quot;</span> <span class=p>`</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>  <span class=n>-EndIpAddress</span> <span class=s2>&quot;203.0.113.255&quot;</span>
</span></code></pre></div> <ol> <li><strong>Secure Integration Runtimes</strong></li> </ol> <p>For Azure Integration Runtimes, use VNet-injection. For Self-hosted Integration Runtimes, deploy within a secured corporate network:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c># Create a managed VNet integration runtime</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=nv>$runtime</span> <span class=p>=</span> <span class=nb>Set-AzSynapseIntegrationRuntime</span> <span class=p>`</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>  <span class=n>-WorkspaceName</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>  <span class=n>-Name</span> <span class=s2>&quot;ManagedVnetIR&quot;</span> <span class=p>`</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>  <span class=n>-Type</span> <span class=s2>&quot;Managed&quot;</span> <span class=p>`</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>  <span class=n>-ManagedVirtualNetwork</span> <span class=s2>&quot;default&quot;</span> <span class=p>`</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>  <span class=n>-Location</span> <span class=s2>&quot;EastUS&quot;</span>
</span></code></pre></div> <ol> <li><strong>Use Service Endpoints</strong></li> </ol> <p>Configure service endpoints on your VNet to securely access Azure services:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c># Configure service endpoint on subnet</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=nv>$subnet</span> <span class=p>=</span> <span class=nb>Get-AzVirtualNetworkSubnetConfig</span> <span class=p>`</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>  <span class=n>-VirtualNetwork</span> <span class=nv>$vnet</span> <span class=p>`</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>  <span class=n>-Name</span> <span class=s2>&quot;default&quot;</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=nb>Set-AzVirtualNetworkSubnetConfig</span> <span class=p>`</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>  <span class=n>-Name</span> <span class=s2>&quot;default&quot;</span> <span class=p>`</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>  <span class=n>-VirtualNetwork</span> <span class=nv>$vnet</span> <span class=p>`</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>  <span class=n>-AddressPrefix</span> <span class=s2>&quot;10.0.0.0/24&quot;</span> <span class=p>`</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>  <span class=n>-ServiceEndpoint</span> <span class=s2>&quot;Microsoft.Sql&quot;</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=nv>$vnet</span> <span class=p>|</span> <span class=nb>Set-AzVirtualNetwork</span>
</span></code></pre></div> <h3 id=network-traffic-filtering-and-monitoring>Network Traffic Filtering and Monitoring<a class=headerlink href=#network-traffic-filtering-and-monitoring title="Permanent link">&para;</a></h3> <ol> <li><strong>Implement Network Security Groups (NSGs)</strong></li> </ol> <p>Control network traffic with detailed rules:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c># Create NSG with restrictive rules</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=nv>$nsgRule</span> <span class=p>=</span> <span class=nb>New-AzNetworkSecurityRuleConfig</span> <span class=p>`</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>  <span class=n>-Name</span> <span class=s2>&quot;Allow-SQL&quot;</span> <span class=p>`</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>  <span class=n>-Protocol</span> <span class=s2>&quot;Tcp&quot;</span> <span class=p>`</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>  <span class=n>-Direction</span> <span class=s2>&quot;Inbound&quot;</span> <span class=p>`</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>  <span class=n>-Priority</span> <span class=n>100</span> <span class=p>`</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>  <span class=n>-SourceAddressPrefix</span> <span class=s2>&quot;VirtualNetwork&quot;</span> <span class=p>`</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>  <span class=n>-SourcePortRange</span> <span class=s2>&quot;*&quot;</span> <span class=p>`</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>  <span class=n>-DestinationAddressPrefix</span> <span class=s2>&quot;*&quot;</span> <span class=p>`</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>  <span class=n>-DestinationPortRange</span> <span class=s2>&quot;1433&quot;</span> <span class=p>`</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>  <span class=n>-Access</span> <span class=s2>&quot;Allow&quot;</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=nb>New-AzNetworkSecurityGroup</span> <span class=p>`</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>  <span class=n>-Location</span> <span class=s2>&quot;eastus&quot;</span> <span class=p>`</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>  <span class=n>-Name</span> <span class=s2>&quot;SynapseNSG&quot;</span> <span class=p>`</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>  <span class=n>-SecurityRules</span> <span class=nv>$nsgRule</span>
</span></code></pre></div> <ol> <li><strong>Enable NSG Flow Logs</strong></li> </ol> <p>Monitor network traffic for security analysis:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c># Enable NSG flow logs</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=nv>$nsg</span> <span class=p>=</span> <span class=nb>Get-AzNetworkSecurityGroup</span> <span class=n>-Name</span> <span class=s2>&quot;SynapseNSG&quot;</span> <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=nb>Set-AzNetworkWatcherFlowLog</span> <span class=p>`</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>  <span class=n>-NetworkWatcher</span> <span class=nv>$networkWatcher</span> <span class=p>`</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>  <span class=n>-TargetResourceId</span> <span class=nv>$nsg</span><span class=p>.</span><span class=n>Id</span> <span class=p>`</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>  <span class=n>-StorageAccountId</span> <span class=nv>$storageAccount</span><span class=p>.</span><span class=n>Id</span> <span class=p>`</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>  <span class=n>-EnableFlowLog</span> <span class=nv>$true</span> <span class=p>`</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>  <span class=n>-FormatType</span> <span class=s2>&quot;JSON&quot;</span> <span class=p>`</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>  <span class=n>-FormatVersion</span> <span class=n>2</span>
</span></code></pre></div> <ol> <li><strong>Implement Azure DDoS Protection</strong></li> </ol> <p>Enable DDoS protection on your virtual network:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c># Enable DDoS protection</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=nv>$vnet</span> <span class=p>=</span> <span class=nb>Get-AzVirtualNetwork</span> <span class=n>-Name</span> <span class=s2>&quot;myVNet&quot;</span> <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=nv>$ddosProtectionPlan</span> <span class=p>=</span> <span class=nb>Get-AzDdosProtectionPlan</span> <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=n>-Name</span> <span class=s2>&quot;myDdosProtectionPlan&quot;</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=nv>$vnet</span><span class=p>.</span><span class=n>DdosProtectionPlan</span> <span class=p>=</span> <span class=nb>New-Object</span> <span class=n>Microsoft</span><span class=p>.</span><span class=n>Azure</span><span class=p>.</span><span class=n>Commands</span><span class=p>.</span><span class=n>Network</span><span class=p>.</span><span class=n>Models</span><span class=p>.</span><span class=n>PSResourceId</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=nv>$vnet</span><span class=p>.</span><span class=n>DdosProtectionPlan</span><span class=p>.</span><span class=n>Id</span> <span class=p>=</span> <span class=nv>$ddosProtectionPlan</span><span class=p>.</span><span class=n>Id</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=nv>$vnet</span><span class=p>.</span><span class=n>EnableDdosProtection</span> <span class=p>=</span> <span class=nv>$true</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=nv>$vnet</span> <span class=p>|</span> <span class=nb>Set-AzVirtualNetwork</span>
</span></code></pre></div> <h2 id=identity-and-access-management-best-practices>Identity and Access Management Best Practices<a class=headerlink href=#identity-and-access-management-best-practices title="Permanent link">&para;</a></h2> <h3 id=implement-azure-active-directory-integration>Implement Azure Active Directory Integration<a class=headerlink href=#implement-azure-active-directory-integration title="Permanent link">&para;</a></h3> <ol> <li><strong>Use Azure AD Authentication</strong></li> </ol> <p>Configure Azure AD authentication for all components:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c># Set Azure AD admin for SQL pools</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=nb>Set-AzSynapseSqlActiveDirectoryAdministrator</span> <span class=p>`</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>  <span class=n>-WorkspaceName</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>  <span class=n>-DisplayName</span> <span class=s2>&quot;AzureAD Admin Group&quot;</span> <span class=p>`</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>  <span class=n>-ObjectId</span> <span class=s2>&quot;00000000-0000-0000-0000-000000000000&quot;</span>
</span></code></pre></div> <ol> <li><strong>Implement Conditional Access</strong></li> </ol> <p>Apply conditional access policies for Synapse workspaces:</p> <ol> <li>Navigate to Azure AD &gt; Security &gt; Conditional Access</li> <li>Create a new policy targeting Synapse workspaces</li> <li>Configure conditions: user/group assignments, cloud apps (Azure Synapse Analytics)</li> <li>Set access controls: require MFA, compliant devices</li> <li> <p>Enable the policy</p> </li> <li> <p><strong>Use Multi-Factor Authentication</strong></p> </li> </ol> <p>Enable MFA for all administrative accounts:</p> <ol> <li>Navigate to Azure AD &gt; Security &gt; MFA</li> <li>Configure per-user MFA or conditional access policies</li> <li>Apply to all accounts with administrative access to Synapse</li> </ol> <h3 id=apply-principle-of-least-privilege>Apply Principle of Least Privilege<a class=headerlink href=#apply-principle-of-least-privilege title="Permanent link">&para;</a></h3> <ol> <li><strong>Implement Granular RBAC</strong></li> </ol> <p>Assign specific roles based on job functions:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c># Assign Synapse RBAC roles</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=nv>$synapseSqlAdmin</span> <span class=p>=</span> <span class=s2>&quot;6e4bf58a-b8e1-4cc3-bbf9-d73143322b78&quot;</span> <span class=c># Synapse SQL Administrator role</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=nv>$synapseApache</span> <span class=p>=</span> <span class=s2>&quot;c3a6d2f1-a26f-4810-9b0f-591308d5cbf1&quot;</span> <span class=c># Apache Spark Administrator role</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=nb>New-AzSynapseRoleAssignment</span> <span class=p>`</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>  <span class=n>-WorkspaceName</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>  <span class=n>-RoleId</span> <span class=nv>$synapseSqlAdmin</span> <span class=p>`</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>  <span class=n>-ObjectId</span> <span class=s2>&quot;00000000-0000-0000-0000-000000000000&quot;</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=nb>New-AzSynapseRoleAssignment</span> <span class=p>`</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>  <span class=n>-WorkspaceName</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a>  <span class=n>-RoleId</span> <span class=nv>$synapseApache</span> <span class=p>`</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a>  <span class=n>-ObjectId</span> <span class=s2>&quot;00000000-0000-0000-0000-000000000001&quot;</span>
</span></code></pre></div> <ol> <li><strong>Implement SQL Role-Based Access Control</strong></li> </ol> <p>Use SQL-level security for granular data access:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1>-- Create database users</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=p>[</span><span class=n>analyst</span><span class=o>@</span><span class=n>contoso</span><span class=p>.</span><span class=n>com</span><span class=p>]</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=k>EXTERNAL</span><span class=w> </span><span class=n>PROVIDER</span><span class=p>;</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=p>[</span><span class=n>reader</span><span class=o>@</span><span class=n>contoso</span><span class=p>.</span><span class=n>com</span><span class=p>]</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=k>EXTERNAL</span><span class=w> </span><span class=n>PROVIDER</span><span class=p>;</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=c1>-- Assign database roles</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=k>ALTER</span><span class=w> </span><span class=k>ROLE</span><span class=w> </span><span class=n>db_datareader</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=n>MEMBER</span><span class=w> </span><span class=p>[</span><span class=n>reader</span><span class=o>@</span><span class=n>contoso</span><span class=p>.</span><span class=n>com</span><span class=p>];</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=c1>-- Create custom role</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=k>CREATE</span><span class=w> </span><span class=k>ROLE</span><span class=w> </span><span class=n>data_analyst</span><span class=p>;</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=k>GRANT</span><span class=w> </span><span class=k>SELECT</span><span class=p>,</span><span class=w> </span><span class=k>EXECUTE</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=k>SCHEMA</span><span class=p>::</span><span class=n>analytics</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>data_analyst</span><span class=p>;</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=k>ALTER</span><span class=w> </span><span class=k>ROLE</span><span class=w> </span><span class=n>data_analyst</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=n>MEMBER</span><span class=w> </span><span class=p>[</span><span class=n>analyst</span><span class=o>@</span><span class=n>contoso</span><span class=p>.</span><span class=n>com</span><span class=p>];</span>
</span></code></pre></div> <ol> <li><strong>Use Privileged Identity Management</strong></li> </ol> <p>Implement just-in-time privileged access:</p> <ol> <li>Navigate to Azure AD &gt; Privileged Identity Management</li> <li>Configure Azure resources &gt; Add role assignments</li> <li>Add eligible assignments for Synapse roles</li> <li>Configure role settings with appropriate activation requirements</li> <li>Set up approval workflows for sensitive roles</li> </ol> <h3 id=secure-service-principals-and-managed-identities>Secure Service Principals and Managed Identities<a class=headerlink href=#secure-service-principals-and-managed-identities title="Permanent link">&para;</a></h3> <ol> <li><strong>Use Managed Identities</strong></li> </ol> <p>Leverage managed identities to eliminate stored credentials:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c># Enable system-assigned managed identity</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=nb>Update-AzSynapseWorkspace</span> <span class=p>`</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>  <span class=n>-Name</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>  <span class=n>-AssignIdentity</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=c># Get the identity</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=nv>$workspace</span> <span class=p>=</span> <span class=nb>Get-AzSynapseWorkspace</span> <span class=n>-Name</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=nv>$identityPrincipalId</span> <span class=p>=</span> <span class=nv>$workspace</span><span class=p>.</span><span class=n>Identity</span><span class=p>.</span><span class=n>PrincipalId</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a><span class=c># Assign permissions to the managed identity</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=nb>New-AzRoleAssignment</span> <span class=p>`</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a>  <span class=n>-ObjectId</span> <span class=nv>$identityPrincipalId</span> <span class=p>`</span>
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a>  <span class=n>-RoleDefinitionName</span> <span class=s2>&quot;Storage Blob Data Contributor&quot;</span> <span class=p>`</span>
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a>  <span class=n>-Scope</span> <span class=s2>&quot;/subscriptions/&lt;subscription-id&gt;/resourceGroups/myresourcegroup/providers/Microsoft.Storage/storageAccounts/mystorageaccount&quot;</span>
</span></code></pre></div> <ol> <li><strong>Secure Service Principals</strong></li> </ol> <p>If using service principals, follow these practices:</p> <ul> <li>Create dedicated service principals for each application/service</li> <li>Implement certificate-based authentication</li> <li>Rotate credentials regularly</li> <li>Apply least-privilege RBAC assignments</li> <li>Monitor service principal activities</li> </ul> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c># Create service principal with certificate</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=nv>$cert</span> <span class=p>=</span> <span class=nb>New-SelfSignedCertificate</span> <span class=p>`</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>  <span class=n>-CertStoreLocation</span> <span class=s2>&quot;cert:\CurrentUser\My&quot;</span> <span class=p>`</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>  <span class=n>-Subject</span> <span class=s2>&quot;CN=SynapseSP&quot;</span> <span class=p>`</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>  <span class=n>-KeySpec</span> <span class=n>KeyExchange</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=nv>$keyValue</span> <span class=p>=</span> <span class=no>[System.Convert]</span><span class=p>::</span><span class=n>ToBase64String</span><span class=p>(</span><span class=nv>$cert</span><span class=p>.</span><span class=n>GetRawCertData</span><span class=p>())</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=nv>$sp</span> <span class=p>=</span> <span class=nb>New-AzADServicePrincipal</span> <span class=p>`</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>  <span class=n>-DisplayName</span> <span class=s2>&quot;SynapsePipelineSP&quot;</span> <span class=p>`</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>  <span class=n>-CertValue</span> <span class=nv>$keyValue</span> <span class=p>`</span>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>  <span class=n>-EndDate</span> <span class=nv>$cert</span><span class=p>.</span><span class=n>NotAfter</span> <span class=p>`</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>  <span class=n>-StartDate</span> <span class=nv>$cert</span><span class=p>.</span><span class=n>NotBefore</span>
</span></code></pre></div> <h2 id=data-protection-best-practices>Data Protection Best Practices<a class=headerlink href=#data-protection-best-practices title="Permanent link">&para;</a></h2> <h3 id=implement-encryption>Implement Encryption<a class=headerlink href=#implement-encryption title="Permanent link">&para;</a></h3> <ol> <li><strong>Enable Transparent Data Encryption (TDE)</strong></li> </ol> <p>Ensure TDE is enabled for all SQL pools:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1>-- Enable TDE for dedicated SQL pool</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=k>ALTER</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=p>[</span><span class=n>MySQLPool</span><span class=p>]</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>ENCRYPTION</span><span class=w> </span><span class=k>ON</span><span class=p>;</span>
</span></code></pre></div> <ol> <li><strong>Use Customer-Managed Keys (CMK)</strong></li> </ol> <p>Implement customer-managed keys for storage and workspace encryption:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=c># Configure customer-managed keys</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=nv>$keyVault</span> <span class=p>=</span> <span class=nb>Get-AzKeyVault</span> <span class=n>-VaultName</span> <span class=s2>&quot;mykeyvault&quot;</span> <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=nv>$key</span> <span class=p>=</span> <span class=nb>Get-AzKeyVaultKey</span> <span class=n>-VaultName</span> <span class=nv>$keyVault</span><span class=p>.</span><span class=n>VaultName</span> <span class=n>-Name</span> <span class=s2>&quot;mykey&quot;</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=nb>Update-AzSynapseWorkspace</span> <span class=p>`</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>  <span class=n>-Name</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a>  <span class=n>-KeyName</span> <span class=nv>$key</span><span class=p>.</span><span class=n>Name</span> <span class=p>`</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a>  <span class=n>-KeyVaultName</span> <span class=nv>$keyVault</span><span class=p>.</span><span class=n>VaultName</span>
</span></code></pre></div> <ol> <li><strong>Enable Always Encrypted</strong></li> </ol> <p>Protect sensitive columns using Always Encrypted:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=c1>-- Create column master key</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=k>CREATE</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=n>MASTER</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>[</span><span class=n>CMK_Auto1</span><span class=p>]</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=k>WITH</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span><span class=n>KEY_STORE_PROVIDER_NAME</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;MSSQL_CERTIFICATE_STORE&#39;</span><span class=p>,</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>    </span><span class=n>KEY_PATH</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;CurrentUser/My/0123456789ABCDEF0123456789ABCDEF01234567&#39;</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=p>);</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=c1>-- Create column encryption key</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=k>CREATE</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=n>ENCRYPTION</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>[</span><span class=n>CEK_Auto1</span><span class=p>]</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=k>WITH</span><span class=w> </span><span class=k>VALUES</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=p>(</span>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=w>    </span><span class=n>COLUMN_MASTER_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=n>CMK_Auto1</span><span class=p>],</span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a><span class=w>    </span><span class=n>ALGORITHM</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;RSA_OAEP&#39;</span><span class=p>,</span>
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a><span class=w>    </span><span class=n>ENCRYPTED_VALUE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=n>x01234</span><span class=p>...</span>
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a><span class=p>);</span>
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a>
</span><span id=__span-15-17><a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a><span class=c1>-- Create table with encrypted columns</span>
</span><span id=__span-15-18><a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=n>dbo</span><span class=p>].[</span><span class=n>Patients</span><span class=p>](</span>
</span><span id=__span-15-19><a id=__codelineno-15-19 name=__codelineno-15-19 href=#__codelineno-15-19></a><span class=w>   </span><span class=p>[</span><span class=n>PatientId</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=nb>int</span><span class=p>]</span><span class=w> </span><span class=k>IDENTITY</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-15-20><a id=__codelineno-15-20 name=__codelineno-15-20 href=#__codelineno-15-20></a><span class=w>   </span><span class=p>[</span><span class=n>SSN</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=nb>char</span><span class=p>](</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>COLLATE</span><span class=w> </span><span class=n>Latin1_General_BIN2</span><span class=w> </span><span class=k>ENCRYPTED</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-15-21><a id=__codelineno-15-21 name=__codelineno-15-21 href=#__codelineno-15-21></a><span class=w>      </span><span class=n>ENCRYPTION_TYPE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>DETERMINISTIC</span><span class=p>,</span>
</span><span id=__span-15-22><a id=__codelineno-15-22 name=__codelineno-15-22 href=#__codelineno-15-22></a><span class=w>      </span><span class=n>ALGORITHM</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;AEAD_AES_256_CBC_HMAC_SHA_256&#39;</span><span class=p>,</span>
</span><span id=__span-15-23><a id=__codelineno-15-23 name=__codelineno-15-23 href=#__codelineno-15-23></a><span class=w>      </span><span class=n>COLUMN_ENCRYPTION_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=n>CEK_Auto1</span><span class=p>]</span>
</span><span id=__span-15-24><a id=__codelineno-15-24 name=__codelineno-15-24 href=#__codelineno-15-24></a><span class=w>   </span><span class=p>),</span>
</span><span id=__span-15-25><a id=__codelineno-15-25 name=__codelineno-15-25 href=#__codelineno-15-25></a><span class=w>   </span><span class=p>[</span><span class=n>FirstName</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>nvarchar</span><span class=p>](</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span>
</span><span id=__span-15-26><a id=__codelineno-15-26 name=__codelineno-15-26 href=#__codelineno-15-26></a><span class=w>   </span><span class=p>[</span><span class=n>LastName</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=n>nvarchar</span><span class=p>](</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>NULL</span>
</span><span id=__span-15-27><a id=__codelineno-15-27 name=__codelineno-15-27 href=#__codelineno-15-27></a><span class=p>);</span>
</span></code></pre></div> <h3 id=implement-data-level-security>Implement Data-Level Security<a class=headerlink href=#implement-data-level-security title="Permanent link">&para;</a></h3> <ol> <li><strong>Use Dynamic Data Masking</strong></li> </ol> <p>Mask sensitive data from non-privileged users:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1>-- Apply dynamic data masking</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=n>dbo</span><span class=p>].[</span><span class=n>Customers</span><span class=p>]</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=k>ALTER</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=p>[</span><span class=n>CreditCard</span><span class=p>]</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=n>MASKED</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=p>(</span><span class=k>FUNCTION</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;partial(0, &quot;XXXX-XXXX-XXXX-&quot;, 4)&#39;</span><span class=p>);</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=n>dbo</span><span class=p>].[</span><span class=n>Customers</span><span class=p>]</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=k>ALTER</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=p>[</span><span class=n>Email</span><span class=p>]</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=n>MASKED</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=p>(</span><span class=k>FUNCTION</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;email()&#39;</span><span class=p>);</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=n>dbo</span><span class=p>].[</span><span class=n>Customers</span><span class=p>]</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=k>ALTER</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=p>[</span><span class=n>Phone</span><span class=p>]</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=n>MASKED</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=p>(</span><span class=k>FUNCTION</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;default()&#39;</span><span class=p>);</span>
</span></code></pre></div> <ol> <li><strong>Implement Row-Level Security (RLS)</strong></li> </ol> <p>Control row access based on user context:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=c1>-- Create filter predicate function</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=k>CREATE</span><span class=w> </span><span class=k>FUNCTION</span><span class=w> </span><span class=p>[</span><span class=k>Security</span><span class=p>].[</span><span class=n>tenantAccessPredicate</span><span class=p>](</span><span class=o>@</span><span class=n>TenantId</span><span class=w> </span><span class=nb>INT</span><span class=p>)</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>    </span><span class=k>RETURNS</span><span class=w> </span><span class=k>TABLE</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=w>    </span><span class=k>WITH</span><span class=w> </span><span class=n>SCHEMABINDING</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=k>AS</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=w>    </span><span class=k>RETURN</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>accessResult</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=w>    </span><span class=k>WHERE</span><span class=w> </span><span class=o>@</span><span class=n>TenantId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>CAST</span><span class=p>(</span><span class=n>SESSION_CONTEXT</span><span class=p>(</span><span class=n>N</span><span class=s1>&#39;TenantId&#39;</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=nb>int</span><span class=p>);</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=c1>-- Apply security policy to table</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=k>CREATE</span><span class=w> </span><span class=k>SECURITY</span><span class=w> </span><span class=n>POLICY</span><span class=w> </span><span class=p>[</span><span class=k>Security</span><span class=p>].[</span><span class=n>tenantAccessPolicy</span><span class=p>]</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=k>ADD</span><span class=w> </span><span class=n>FILTER</span><span class=w> </span><span class=n>PREDICATE</span><span class=w> </span><span class=p>[</span><span class=k>Security</span><span class=p>].[</span><span class=n>tenantAccessPredicate</span><span class=p>]([</span><span class=n>TenantId</span><span class=p>])</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=k>ON</span><span class=w> </span><span class=p>[</span><span class=n>dbo</span><span class=p>].[</span><span class=n>CustomerData</span><span class=p>],</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a><span class=k>ADD</span><span class=w> </span><span class=n>BLOCK</span><span class=w> </span><span class=n>PREDICATE</span><span class=w> </span><span class=p>[</span><span class=k>Security</span><span class=p>].[</span><span class=n>tenantAccessPredicate</span><span class=p>]([</span><span class=n>TenantId</span><span class=p>])</span>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a><span class=k>ON</span><span class=w> </span><span class=p>[</span><span class=n>dbo</span><span class=p>].[</span><span class=n>CustomerData</span><span class=p>];</span>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=c1>-- Enable the security policy</span>
</span><span id=__span-17-17><a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a><span class=k>ALTER</span><span class=w> </span><span class=k>SECURITY</span><span class=w> </span><span class=n>POLICY</span><span class=w> </span><span class=p>[</span><span class=k>Security</span><span class=p>].[</span><span class=n>tenantAccessPolicy</span><span class=p>]</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=p>(</span><span class=k>STATE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>ON</span><span class=p>);</span>
</span><span id=__span-17-18><a id=__codelineno-17-18 name=__codelineno-17-18 href=#__codelineno-17-18></a>
</span><span id=__span-17-19><a id=__codelineno-17-19 name=__codelineno-17-19 href=#__codelineno-17-19></a><span class=c1>-- Set session context when connecting</span>
</span><span id=__span-17-20><a id=__codelineno-17-20 name=__codelineno-17-20 href=#__codelineno-17-20></a><span class=k>EXEC</span><span class=w> </span><span class=n>sp_set_session_context</span><span class=w> </span><span class=o>@</span><span class=k>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;TenantId&#39;</span><span class=p>,</span><span class=w> </span><span class=o>@</span><span class=n>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>42</span><span class=p>;</span>
</span></code></pre></div> <ol> <li><strong>Implement Column-Level Security (CLS)</strong></li> </ol> <p>Restrict access to specific columns:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1>-- Deny access to specific columns</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=n>DENY</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=p>[</span><span class=n>dbo</span><span class=p>].[</span><span class=n>Employees</span><span class=p>]([</span><span class=n>Salary</span><span class=p>],</span><span class=w> </span><span class=p>[</span><span class=n>SSN</span><span class=p>])</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=p>[</span><span class=n>Analyst</span><span class=p>];</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=c1>-- Grant access to specific columns</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=k>GRANT</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=p>[</span><span class=n>dbo</span><span class=p>].[</span><span class=n>Employees</span><span class=p>]([</span><span class=n>EmployeeId</span><span class=p>],</span><span class=w> </span><span class=p>[</span><span class=n>FirstName</span><span class=p>],</span><span class=w> </span><span class=p>[</span><span class=n>LastName</span><span class=p>],</span><span class=w> </span><span class=p>[</span><span class=n>Department</span><span class=p>])</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=p>[</span><span class=n>Analyst</span><span class=p>];</span>
</span></code></pre></div> <ol> <li><strong>Data Classification and Sensitivity Labels</strong></li> </ol> <p>Implement data discovery and classification:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=c1>-- Add classification</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=k>ADD</span><span class=w> </span><span class=n>SENSITIVITY</span><span class=w> </span><span class=n>CLASSIFICATION</span><span class=w> </span><span class=k>TO</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=w>    </span><span class=p>[</span><span class=n>dbo</span><span class=p>].[</span><span class=n>Customers</span><span class=p>].[</span><span class=n>SSN</span><span class=p>]</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=p>(</span><span class=n>LABEL</span><span class=o>=</span><span class=s1>&#39;Highly Confidential&#39;</span><span class=p>,</span><span class=w> </span><span class=n>INFORMATION_TYPE</span><span class=o>=</span><span class=s1>&#39;National ID&#39;</span><span class=p>);</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=k>ADD</span><span class=w> </span><span class=n>SENSITIVITY</span><span class=w> </span><span class=n>CLASSIFICATION</span><span class=w> </span><span class=k>TO</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=w>    </span><span class=p>[</span><span class=n>dbo</span><span class=p>].[</span><span class=n>Patients</span><span class=p>].[</span><span class=n>Diagnosis</span><span class=p>]</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=p>(</span><span class=n>LABEL</span><span class=o>=</span><span class=s1>&#39;Confidential&#39;</span><span class=p>,</span><span class=w> </span><span class=n>INFORMATION_TYPE</span><span class=o>=</span><span class=s1>&#39;Medical&#39;</span><span class=p>);</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=c1>-- View current classifications</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>sys</span><span class=p>.</span><span class=n>sensitivity_classifications</span><span class=p>;</span>
</span></code></pre></div> <h3 id=secure-data-storage-and-movement>Secure Data Storage and Movement<a class=headerlink href=#secure-data-storage-and-movement title="Permanent link">&para;</a></h3> <ol> <li><strong>Use Azure Key Vault for Secrets Management</strong></li> </ol> <p>Store all credentials and secrets in Azure Key Vault:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=c># Create linked service using Key Vault</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=nv>$keyVaultLinkedService</span> <span class=p>=</span> <span class=p>@{</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>    <span class=n>name</span> <span class=p>=</span> <span class=s2>&quot;AzureKeyVaultLinkedService&quot;</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>    <span class=n>properties</span> <span class=p>=</span> <span class=p>@{</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>        <span class=nb>type </span><span class=p>=</span> <span class=s2>&quot;AzureKeyVault&quot;</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>        <span class=n>typeProperties</span> <span class=p>=</span> <span class=p>@{</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>            <span class=n>baseUrl</span> <span class=p>=</span> <span class=s2>&quot;https://mykeyvault.vault.azure.net/&quot;</span>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>        <span class=p>}</span>
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>    <span class=p>}</span>
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a><span class=p>}</span>
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a>
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a><span class=nv>$linkedService</span> <span class=p>=</span> <span class=nb>New-AzSynapseLinkedService</span> <span class=p>`</span>
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a>  <span class=n>-WorkspaceName</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-20-14><a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a>  <span class=n>-Name</span> <span class=s2>&quot;AzureKeyVault&quot;</span> <span class=p>`</span>
</span><span id=__span-20-15><a id=__codelineno-20-15 name=__codelineno-20-15 href=#__codelineno-20-15></a>  <span class=n>-DefinitionFile</span> <span class=p>(</span><span class=nb>ConvertTo-Json</span> <span class=nv>$keyVaultLinkedService</span> <span class=n>-Depth</span> <span class=n>20</span><span class=p>)</span>
</span></code></pre></div> <ol> <li><strong>Secure Data Movement</strong></li> </ol> <p>Ensure encryption in transit for all data movement:</p> <ul> <li>Use private endpoints for data sources</li> <li>Use HTTPS/SSL for all external connections</li> <li>Implement ExpressRoute for on-premises connectivity</li> <li> <p>Use TLS 1.2+ for all communications</p> </li> <li> <p><strong>Implement Storage Security</strong></p> </li> </ul> <p>Secure ADLS Gen2 storage:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=c># Configure Storage Account with secure transfer</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=nb>New-AzStorageAccount</span> <span class=p>`</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>  <span class=n>-Name</span> <span class=s2>&quot;mystorageaccount&quot;</span> <span class=p>`</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>  <span class=n>-Location</span> <span class=s2>&quot;eastus&quot;</span> <span class=p>`</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>  <span class=n>-SkuName</span> <span class=s2>&quot;Standard_LRS&quot;</span> <span class=p>`</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>  <span class=n>-Kind</span> <span class=s2>&quot;StorageV2&quot;</span> <span class=p>`</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>  <span class=n>-EnableHierarchicalNamespace</span> <span class=nv>$true</span> <span class=p>`</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a>  <span class=n>-MinimumTlsVersion</span> <span class=s2>&quot;TLS1_2&quot;</span> <span class=p>`</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a>  <span class=n>-EnableHttpsTrafficOnly</span> <span class=nv>$true</span> <span class=p>`</span>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a>  <span class=n>-AllowBlobPublicAccess</span> <span class=nv>$false</span>
</span></code></pre></div> <h2 id=monitoring-and-threat-protection-best-practices>Monitoring and Threat Protection Best Practices<a class=headerlink href=#monitoring-and-threat-protection-best-practices title="Permanent link">&para;</a></h2> <h3 id=implement-comprehensive-monitoring>Implement Comprehensive Monitoring<a class=headerlink href=#implement-comprehensive-monitoring title="Permanent link">&para;</a></h3> <ol> <li><strong>Enable Diagnostic Logging</strong></li> </ol> <p>Capture detailed diagnostics for all components:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=c># Enable diagnostic settings</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=nv>$workspaceId</span> <span class=p>=</span> <span class=p>(</span><span class=nb>Get-AzOperationalInsightsWorkspace</span> <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=n>-Name</span> <span class=s2>&quot;myworkspace&quot;</span><span class=p>).</span><span class=n>ResourceId</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=nb>Set-AzDiagnosticSetting</span> <span class=p>`</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>  <span class=n>-ResourceId</span> <span class=p>(</span><span class=nb>Get-AzSynapseWorkspace</span> <span class=n>-Name</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span><span class=p>).</span><span class=n>Id</span> <span class=p>`</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a>  <span class=n>-Name</span> <span class=s2>&quot;synapsediagnostics&quot;</span> <span class=p>`</span>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a>  <span class=n>-WorkspaceId</span> <span class=nv>$workspaceId</span> <span class=p>`</span>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a>  <span class=n>-Enabled</span> <span class=nv>$true</span> <span class=p>`</span>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a>  <span class=n>-Category</span> <span class=p>@(</span><span class=s2>&quot;SynapseRbacOperations&quot;</span><span class=p>,</span> <span class=s2>&quot;GatewayApiRequests&quot;</span><span class=p>,</span> <span class=s2>&quot;BuiltinSqlReqsEnded&quot;</span><span class=p>,</span> <span class=s2>&quot;IntegrationPipelineRuns&quot;</span><span class=p>,</span> <span class=s2>&quot;IntegrationActivityRuns&quot;</span><span class=p>,</span> <span class=s2>&quot;IntegrationTriggerRuns&quot;</span><span class=p>)</span>
</span></code></pre></div> <ol> <li><strong>Configure Activity Log Alerting</strong></li> </ol> <p>Create alerts for critical operations:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=c># Create activity log alert</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=nv>$actionGroupId</span> <span class=p>=</span> <span class=p>(</span><span class=nb>Get-AzActionGroup</span> <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=n>-Name</span> <span class=s2>&quot;SecurityTeam&quot;</span><span class=p>).</span><span class=n>Id</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=nv>$condition</span> <span class=p>=</span> <span class=nb>New-AzActivityLogAlertCondition</span> <span class=p>`</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>  <span class=n>-Field</span> <span class=s2>&quot;category&quot;</span> <span class=p>`</span>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>  <span class=n>-Equal</span> <span class=s2>&quot;Administrative&quot;</span> <span class=p>`</span>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a>  <span class=n>-Field</span> <span class=s2>&quot;operationName&quot;</span> <span class=p>`</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a>  <span class=n>-Equal</span> <span class=s2>&quot;Microsoft.Synapse/workspaces/firewallRules/write&quot;</span>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=nb>New-AzActivityLogAlert</span> <span class=p>`</span>
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a>  <span class=n>-Name</span> <span class=s2>&quot;SynapseFirewallChange&quot;</span> <span class=p>`</span>
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a>  <span class=n>-Condition</span> <span class=nv>$condition</span> <span class=p>`</span>
</span><span id=__span-23-14><a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a>  <span class=n>-Scope</span> <span class=s2>&quot;/subscriptions/&lt;subscription-id&gt;/resourceGroups/myresourcegroup/providers/Microsoft.Synapse/workspaces/mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-23-15><a id=__codelineno-23-15 name=__codelineno-23-15 href=#__codelineno-23-15></a>  <span class=n>-ActionGroupId</span> <span class=nv>$actionGroupId</span>
</span></code></pre></div> <ol> <li><strong>Use Microsoft Sentinel</strong></li> </ol> <p>Configure Microsoft Sentinel for advanced security monitoring:</p> <ul> <li>Connect Synapse workspace logs to Sentinel</li> <li>Implement analytical rules for threat detection</li> <li>Create custom dashboards for security monitoring</li> <li>Configure automated response with playbooks</li> </ul> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=c># Deploy Sentinel ARM template</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=nb>New-AzResourceGroupDeployment</span> <span class=p>`</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>  <span class=n>-Name</span> <span class=s2>&quot;SentinelDeployment&quot;</span> <span class=p>`</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a>  <span class=n>-TemplateFile</span> <span class=s2>&quot;sentinel-synapse-connector.json&quot;</span>
</span></code></pre></div> <h3 id=implement-advanced-threat-protection>Implement Advanced Threat Protection<a class=headerlink href=#implement-advanced-threat-protection title="Permanent link">&para;</a></h3> <ol> <li><strong>Enable Microsoft Defender for Cloud</strong></li> </ol> <p>Activate Microsoft Defender for Cloud for Synapse workspaces:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=c># Enable Defender for Synapse</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=nb>Set-AzSecurityPricing</span> <span class=p>`</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>  <span class=n>-Name</span> <span class=s2>&quot;SqlServers&quot;</span> <span class=p>`</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>  <span class=n>-PricingTier</span> <span class=s2>&quot;Standard&quot;</span>
</span></code></pre></div> <ol> <li><strong>Configure SQL Auditing</strong></li> </ol> <p>Enable comprehensive auditing:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=c># Configure SQL Auditing</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=nb>Set-AzSynapseSqlPoolAudit</span> <span class=p>`</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a>  <span class=n>-WorkspaceName</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a>  <span class=n>-Name</span> <span class=s2>&quot;SQLPool01&quot;</span> <span class=p>`</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>  <span class=n>-AuditActionGroup</span> <span class=p>@(</span><span class=s2>&quot;SUCCESSFUL_DATABASE_AUTHENTICATION_GROUP&quot;</span><span class=p>,</span> <span class=s2>&quot;FAILED_DATABASE_AUTHENTICATION_GROUP&quot;</span><span class=p>,</span> <span class=s2>&quot;DATABASE_OPERATION_GROUP&quot;</span><span class=p>)</span> <span class=p>`</span>
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a>  <span class=n>-LogAnalyticsTargetState</span> <span class=s2>&quot;Enabled&quot;</span> <span class=p>`</span>
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a>  <span class=n>-WorkspaceResourceId</span> <span class=nv>$workspaceId</span>
</span></code></pre></div> <ol> <li><strong>Implement Vulnerability Assessment</strong></li> </ol> <p>Regular vulnerability scanning and assessment:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=c># Enable Vulnerability Assessment</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=nv>$storageAccount</span> <span class=p>=</span> <span class=nb>Get-AzStorageAccount</span> <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=n>-Name</span> <span class=s2>&quot;securitystorage&quot;</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=nb>Update-AzSynapseSqlPoolVulnerabilityAssessmentSetting</span> <span class=p>`</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a>  <span class=n>-WorkspaceName</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a>  <span class=n>-Name</span> <span class=s2>&quot;SQLPool01&quot;</span> <span class=p>`</span>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a>  <span class=n>-StorageAccountName</span> <span class=nv>$storageAccount</span><span class=p>.</span><span class=n>StorageAccountName</span> <span class=p>`</span>
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>  <span class=n>-ScanResultsContainerName</span> <span class=s2>&quot;vulnerability-assessment&quot;</span>
</span></code></pre></div> <ol> <li><strong>Configure ATP for SQL Pools</strong></li> </ol> <p>Enable Advanced Threat Protection for SQL Pools:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=c># Enable ATP for SQL Pool</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=nb>Update-AzSynapseSqlPoolAdvancedThreatProtectionSetting</span> <span class=p>`</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a>  <span class=n>-WorkspaceName</span> <span class=s2>&quot;mysynapseworkspace&quot;</span> <span class=p>`</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>  <span class=n>-Name</span> <span class=s2>&quot;SQLPool01&quot;</span> <span class=p>`</span>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>  <span class=n>-NotificationRecipientsEmails</span> <span class=s2>&quot;security@contoso.com&quot;</span> <span class=p>`</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a>  <span class=n>-EmailAdmins</span> <span class=nv>$true</span> <span class=p>`</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a>  <span class=n>-ExcludedDetectionType</span> <span class=s2>&quot;None&quot;</span>
</span></code></pre></div> <h2 id=secure-development-and-deployment-best-practices>Secure Development and Deployment Best Practices<a class=headerlink href=#secure-development-and-deployment-best-practices title="Permanent link">&para;</a></h2> <h3 id=secure-cicd-practices>Secure CI/CD Practices<a class=headerlink href=#secure-cicd-practices title="Permanent link">&para;</a></h3> <ol> <li><strong>Implement Pipeline Security</strong></li> </ol> <p>Follow secure CI/CD practices:</p> <ul> <li>Use separate development, testing, and production environments</li> <li>Implement approval workflows for production deployments</li> <li>Validate resources with Azure Policy before deployment</li> <li> <p>Scan code for security issues during CI process</p> </li> <li> <p><strong>Secure Resource Deployment</strong></p> </li> </ul> <p>Use Infrastructure as Code with security validations:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=c># Deploy Synapse resources with ARM template</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=nb>New-AzResourceGroupDeployment</span> <span class=p>`</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>  <span class=n>-Name</span> <span class=s2>&quot;SecureSynapseDeployment&quot;</span> <span class=p>`</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a>  <span class=n>-TemplateFile</span> <span class=s2>&quot;secure-synapse-template.json&quot;</span> <span class=p>`</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a>  <span class=n>-TemplateParameterFile</span> <span class=s2>&quot;secure-synapse-params.json&quot;</span>
</span></code></pre></div> <ol> <li><strong>Implement Secrets Management</strong></li> </ol> <p>Use secure practices for managing secrets in pipelines:</p> <ul> <li>Use key rotation policies</li> <li>Implement just-in-time secrets access</li> <li>Audit all secrets access</li> <li>Use managed identities where possible</li> </ul> <h3 id=secure-code-development>Secure Code Development<a class=headerlink href=#secure-code-development title="Permanent link">&para;</a></h3> <ol> <li><strong>Implement Secure SQL Practices</strong></li> </ol> <p>Prevent SQL injection and other vulnerabilities:</p> <div class="language-sql highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=c1>-- Use parameterized queries</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=k>CREATE</span><span class=w> </span><span class=k>PROCEDURE</span><span class=w> </span><span class=p>[</span><span class=n>dbo</span><span class=p>].[</span><span class=n>GetUserData</span><span class=p>]</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=w>    </span><span class=o>@</span><span class=n>UserId</span><span class=w> </span><span class=nb>INT</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=k>AS</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=k>BEGIN</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=w>    </span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=p>[</span><span class=n>dbo</span><span class=p>].[</span><span class=n>Users</span><span class=p>]</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=p>[</span><span class=n>UserId</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>@</span><span class=n>UserId</span><span class=p>;</span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=k>END</span>
</span></code></pre></div> <ol> <li><strong>Secure Spark Development</strong></li> </ol> <p>Follow secure development practices for Spark:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=c1># Input validation</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=k>def</span><span class=w> </span><span class=nf>process_data</span><span class=p>(</span><span class=n>input_path</span><span class=p>):</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>    <span class=c1># Validate input</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>input_path</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s1>&#39;abfss://container@storage.dfs.core.windows.net/&#39;</span><span class=p>):</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Invalid input path&quot;</span><span class=p>)</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a>    <span class=c1># Process data</span>
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a>    <span class=n>df</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>parquet</span><span class=p>(</span><span class=n>input_path</span><span class=p>)</span>
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a>
</span><span id=__span-31-10><a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a>    <span class=c1># Sanitize outputs</span>
</span><span id=__span-31-11><a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a>    <span class=n>df</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=n>col</span><span class=p>(</span><span class=s2>&quot;column1&quot;</span><span class=p>),</span> <span class=n>col</span><span class=p>(</span><span class=s2>&quot;column2&quot;</span><span class=p>))</span>
</span><span id=__span-31-12><a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a>
</span><span id=__span-31-13><a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a>    <span class=k>return</span> <span class=n>df</span>
</span></code></pre></div> <ol> <li><strong>Secure Notebook Development</strong></li> </ol> <p>Implement security in Jupyter notebooks:</p> <ul> <li>Don't store credentials in notebooks</li> <li>Use Key Vault-linked services for connections</li> <li>Implement proper error handling</li> <li>Validate all inputs and parameters</li> <li> <p>Sanitize outputs for display</p> </li> <li> <p><strong>Implement Code Reviews</strong></p> </li> </ul> <p>Establish security-focused code review processes:</p> <ul> <li>Create a security review checklist</li> <li>Use automated code scanning tools</li> <li>Conduct peer reviews for security aspects</li> <li>Require approval from security team for sensitive areas</li> </ul> <h2 id=secure-operations-best-practices>Secure Operations Best Practices<a class=headerlink href=#secure-operations-best-practices title="Permanent link">&para;</a></h2> <h3 id=implement-security-baselines>Implement Security Baselines<a class=headerlink href=#implement-security-baselines title="Permanent link">&para;</a></h3> <ol> <li><strong>Document Security Standards</strong></li> </ol> <p>Create and maintain security baselines for all components:</p> <ul> <li>Network configuration standards</li> <li>Identity management standards</li> <li>Data protection standards</li> <li> <p>Monitoring configuration standards</p> </li> <li> <p><strong>Perform Regular Security Assessments</strong></p> </li> </ul> <p>Conduct periodic security reviews:</p> <ul> <li>Vulnerability assessments</li> <li>Configuration drift analysis</li> <li>Penetration testing</li> <li> <p>Compliance assessments</p> </li> <li> <p><strong>Implement Security Patching</strong></p> </li> </ul> <p>Keep all components updated:</p> <ul> <li>Apply security patches promptly</li> <li>Test patches in non-production environments</li> <li>Document patch management procedures</li> <li>Monitor for new security advisories</li> </ul> <h3 id=incident-response>Incident Response<a class=headerlink href=#incident-response title="Permanent link">&para;</a></h3> <ol> <li><strong>Create Incident Response Plan</strong></li> </ol> <p>Develop procedures for security incidents:</p> <ul> <li>Detection procedures</li> <li>Containment strategies</li> <li>Eradication steps</li> <li>Recovery procedures</li> <li> <p>Post-incident analysis</p> </li> <li> <p><strong>Implement Security Playbooks</strong></p> </li> </ul> <p>Create automated response workflows:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=c># Deploy Logic App for security automation</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=nb>New-AzResourceGroupDeployment</span> <span class=p>`</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a>  <span class=n>-Name</span> <span class=s2>&quot;SecurityPlaybookDeployment&quot;</span> <span class=p>`</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a>  <span class=n>-TemplateFile</span> <span class=s2>&quot;security-playbook.json&quot;</span>
</span></code></pre></div> <ol> <li><strong>Conduct Regular Drills</strong></li> </ol> <p>Practice responding to security incidents:</p> <ul> <li>Tabletop exercises</li> <li>Simulated breach scenarios</li> <li>Recovery testing</li> <li>Cross-team coordination exercises</li> </ul> <h2 id=special-considerations-for-hybrid-environments>Special Considerations for Hybrid Environments<a class=headerlink href=#special-considerations-for-hybrid-environments title="Permanent link">&para;</a></h2> <h3 id=secure-hybrid-connectivity>Secure Hybrid Connectivity<a class=headerlink href=#secure-hybrid-connectivity title="Permanent link">&para;</a></h3> <ol> <li><strong>Implement ExpressRoute</strong></li> </ol> <p>Use dedicated connections for hybrid scenarios:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=c># Configure ExpressRoute for Synapse</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=nb>New-AzExpressRouteCircuit</span> <span class=p>`</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a>  <span class=n>-Name</span> <span class=s2>&quot;SynapseExpressRoute&quot;</span> <span class=p>`</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a>  <span class=n>-ResourceGroupName</span> <span class=s2>&quot;myresourcegroup&quot;</span> <span class=p>`</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a>  <span class=n>-Location</span> <span class=s2>&quot;eastus&quot;</span> <span class=p>`</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a>  <span class=n>-SkuTier</span> <span class=s2>&quot;Standard&quot;</span> <span class=p>`</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>  <span class=n>-SkuFamily</span> <span class=s2>&quot;MeteredData&quot;</span> <span class=p>`</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a>  <span class=n>-ServiceProviderName</span> <span class=s2>&quot;Equinix&quot;</span> <span class=p>`</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>  <span class=n>-PeeringLocation</span> <span class=s2>&quot;Washington DC&quot;</span> <span class=p>`</span>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a>  <span class=n>-BandwidthInMbps</span> <span class=n>200</span>
</span></code></pre></div> <ol> <li><strong>Secure Self-hosted Integration Runtimes</strong></li> </ol> <p>Implement security for on-premises integration runtimes:</p> <ul> <li>Deploy in a secure network segment</li> <li>Implement network-level protection</li> <li>Update regularly for security patches</li> <li>Monitor runtime activities</li> <li> <p>Implement host-based security</p> </li> <li> <p><strong>Secure Credential Management</strong></p> </li> </ul> <p>Manage credentials securely in hybrid scenarios:</p> <ul> <li>Use Key Vault for credential storage</li> <li>Implement credential rotation</li> <li>Audit credential access</li> <li>Use managed identities where applicable</li> </ul> <h2 id=security-checklist>Security Checklist<a class=headerlink href=#security-checklist title="Permanent link">&para;</a></h2> <p>Use this checklist to ensure comprehensive security implementation:</p> <h3 id=network-security>Network Security<a class=headerlink href=#network-security title="Permanent link">&para;</a></h3> <ul> <li>[ ] Managed virtual network enabled</li> <li>[ ] Private endpoints configured for all services</li> <li>[ ] IP firewall rules restricted to necessary ranges</li> <li>[ ] NSGs implemented with least-privilege rules</li> <li>[ ] Service endpoints configured for Azure services</li> <li>[ ] Network traffic monitoring enabled</li> </ul> <h3 id=identity-and-access-management>Identity and Access Management<a class=headerlink href=#identity-and-access-management title="Permanent link">&para;</a></h3> <ul> <li>[ ] Azure AD authentication configured</li> <li>[ ] MFA enabled for all administrative accounts</li> <li>[ ] Conditional access policies implemented</li> <li>[ ] RBAC implemented with least-privilege principle</li> <li>[ ] PIM configured for privileged access</li> <li>[ ] Service principals secured with certificates and least-privilege</li> </ul> <h3 id=data-protection>Data Protection<a class=headerlink href=#data-protection title="Permanent link">&para;</a></h3> <ul> <li>[ ] TDE enabled for all SQL pools</li> <li>[ ] CMK configured for workspace encryption</li> <li>[ ] Data masking implemented for sensitive fields</li> <li>[ ] RLS policies configured for multi-tenant data</li> <li>[ ] CLS implemented for column-level protection</li> <li>[ ] Always Encrypted configured for sensitive columns</li> </ul> <h3 id=monitoring-and-threat-protection>Monitoring and Threat Protection<a class=headerlink href=#monitoring-and-threat-protection title="Permanent link">&para;</a></h3> <ul> <li>[ ] Diagnostic settings enabled for all components</li> <li>[ ] Microsoft Defender for Cloud activated</li> <li>[ ] SQL auditing configured with appropriate retention</li> <li>[ ] Vulnerability assessment enabled</li> <li>[ ] Advanced Threat Protection enabled</li> <li>[ ] Activity log alerts configured for security events</li> </ul> <h3 id=secure-development-and-deployment>Secure Development and Deployment<a class=headerlink href=#secure-development-and-deployment title="Permanent link">&para;</a></h3> <ul> <li>[ ] Secure CI/CD pipelines implemented</li> <li>[ ] Code scanning integrated into development workflow</li> <li> <p>[ ] Secrets managed securely in Key Vault</p> </li> <li> <p>[ ] Infrastructure deployed using templates with security validations</p> </li> <li>[ ] Separate environments for development, testing, and production</li> </ul> <h2 id=related-topics>Related Topics<a class=headerlink href=#related-topics title="Permanent link">&para;</a></h2> <ul> <li><a href=../compliance-guide/ >Security Compliance Guide</a></li> <li>Network Security Configuration</li> <li>Data Protection Best Practices</li> <li><a href=../../monitoring/logging-monitoring-guide/ >Monitoring and Logging Guide</a></li> <li>DevOps Security Best Practices</li> </ul> <h2 id=external-resources>External Resources<a class=headerlink href=#external-resources title="Permanent link">&para;</a></h2> <ul> <li><a href=https://docs.microsoft.com/en-us/azure/security/fundamentals/best-practices-and-patterns>Azure Security Best Practices</a></li> <li><a href=https://azure.microsoft.com/en-us/resources/azure-synapse-analytics-security-white-paper/ >Azure Synapse Analytics Security White Paper</a></li> <li><a href=https://www.microsoft.com/security/blog/ >Microsoft Security Blog</a></li> </ul> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by <a href="https://github.com/fgarofalo56/csa-inabox-docs/issues/new?title=[Feedback]+Best%20Practices+-+/security/best-practices/" target=_blank rel=noopener>opening an issue</a>. </div> </div> </div> </fieldset> </form> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 Microsoft </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/fgarofalo56/csa-inabox-docs target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://azure.microsoft.com/en-us/services/synapse-analytics/ target=_blank rel=noopener title=azure.microsoft.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 32h214.6v214.6H0V32zm233.4 0H448v214.6H233.4V32zM0 265.4h214.6V480H0V265.4zm233.4 0H448V480H233.4V265.4z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <label class=md-button for=__settings>Manage settings</label> <button type=reset class="md-button md-button--primary">Reject</button> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.sections", "toc.integrate", "content.tabs.link", "navigation.indexes", "navigation.top", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.aecac24b.min.js></script> </body> </html>